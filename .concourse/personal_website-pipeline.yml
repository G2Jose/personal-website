jobs:
- name: build-web
  public: true
  serial: true
  plan:
  - get: resource-personal-website
    trigger: true
  - task: build-web-container
    file: resource-personal-website/.concourse/tasks/build-web-container.yml
    privileged: true
    params:
      DOCKER_HUB_EMAIL: {{docker-hub-email}}
      DOCKER_HUB_USERNAME: {{docker-hub-username}}
      DOCKER_HUB_PASSWORD: {{docker-hub-password}}
      DOCKER_HUB_IMAGE: {{docker-hub-image-web}}
# - name: load-web
#   public: true
#   serial: true
#   plan:
#   - get: resource-personal-website
#   - task: load-web-container
#     passed: [build-web]
#     trigger: true
#     file: resource-personal-website/.concourse/tasks/load-web-container.yml
#     privileged: true

resources:
- name: resource-personal-website
  type: git
  source:
    uri: https://github.com/G2Jose/personal-website.git
    branch: concourse
